{"ast":null,"code":"var _jsxFileName = \"/Users/slavaP/Desktop/labs/=MOD4/practice/src/EventsContainer.js\";\nimport React from \"react\";\nimport Card from './Card';\nexport default class CardsContainer extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      nearestEvents: [],\n      allEvents: [],\n      loaded: false\n    };\n  }\n\n  componentDidMount() {\n    switch (this.props.id) {\n      case 0:\n        fetch(\"http://localhost:3000/api/v1/nearest\", {\n          method: \"POST\",\n          headers: {\n            \"accepts\": \"application/json\",\n            \"content-type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            latitude: this.props.lat,\n            longitude: this.props.long\n          })\n        }).then(resp => resp.json()).then(data => this.setState({\n          allEvents: data.Events.Event,\n          nearestEvents: data.Events.Event.slice(0, 5),\n          loaded: true\n        }));\n        break;\n\n      case 1:\n        const options = {\n          enableHighAccuracy: true,\n          timeout: 10000,\n          maximumAge: 0\n        };\n\n        const success = pos => {\n          const crd = pos.coords;\n          fetch(\"http://localhost:3000/api/v1/nearest\", {\n            method: \"POST\",\n            headers: {\n              \"accepts\": \"application/json\",\n              \"content-type\": \"application/json\"\n            },\n            body: JSON.stringify({\n              latitude: crd.latitude,\n              longitude: crd.longitude\n            })\n          }).then(resp => resp.json()).then(data => this.setState({\n            allEvents: data.Events.Event,\n            nearestEvents: data.Events.Event !== undefined ? data.Events.Event.slice(0, 5) : [],\n            loaded: true\n          }));\n        };\n\n        const error = err => {\n          console.warn(\"ERROR(\".concat(err.code, \"): \").concat(err.message));\n        };\n\n        navigator.geolocation.getCurrentPosition(success, error, options);\n        break;\n\n      case 2:\n        fetch(\"http://localhost:3000/api/v1/free\").then(resp => resp.json()).then(data => this.setState({\n          allEvents: data.Events.Event,\n          nearestEvents: data.Events.Event !== undefined ? data.Events.Event.slice(0, 5) : [],\n          loaded: true\n        }));\n        break;\n\n      case 3:\n        fetch(\"http://localhost:3000/api/v1/nearest\", {\n          method: \"POST\",\n          headers: {\n            \"accepts\": \"application/json\",\n            \"content-type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            latitude: this.props.lat,\n            longitude: this.props.long\n          })\n        }).then(resp => resp.json()).then(data => this.setState({\n          nearestEvents: data.Events.Event.slice(0, 5),\n          loaded: true\n        }));\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.props.id === 0) {\n      fetch(\"http://localhost:3000/api/v1/nearest\", {\n        method: \"POST\",\n        headers: {\n          \"accepts\": \"application/json\",\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          latitude: this.props.lat,\n          longitude: this.props.long\n        })\n      }).then(resp => resp.json()).then(data => this.setState({\n        allEvents: data.Events.Event,\n        nearestEvents: data.Events.Event.slice(0, 5),\n        loaded: true\n      }));\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, this.state.loaded ? React.createElement(\"div\", {\n      className: \"cards\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, this.state.nearestEvents !== undefined ? this.state.nearestEvents.map(event => React.createElement(Card, {\n      key: event.Name,\n      event: event,\n      showEventInfo: this.props.showEventInfo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    })) : null, this.state.nearestEvents.length > 0 ? this.state.nearestEvents.length > 4 ? React.createElement(\"a\", {\n      href: \"/login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, \"Show me more!\") : null : React.createElement(\"p\", {\n      style: {\n        paddingLeft: \"40px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"No events to show, sorry!\")) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Loading...\")));\n  }\n\n}","map":{"version":3,"sources":["/Users/slavaP/Desktop/labs/=MOD4/practice/src/EventsContainer.js"],"names":["React","Card","CardsContainer","Component","state","nearestEvents","allEvents","loaded","componentDidMount","props","id","fetch","method","headers","body","JSON","stringify","latitude","lat","longitude","long","then","resp","json","data","setState","Events","Event","slice","options","enableHighAccuracy","timeout","maximumAge","success","pos","crd","coords","undefined","error","err","console","warn","code","message","navigator","geolocation","getCurrentPosition","componentDidUpdate","render","map","event","Name","showEventInfo","length","paddingLeft"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Card from './Card'\n\nexport default class CardsContainer extends React.Component{\n    state = {\n        nearestEvents: [],\n        allEvents: [],\n        loaded: false\n    }\n\n    componentDidMount(){\n        switch (this.props.id) {\n            case 0:\n                fetch(`http://localhost:3000/api/v1/nearest`,{\n                    method: \"POST\",\n                    headers:{\n                        \"accepts\": \"application/json\",\n                        \"content-type\": \"application/json\"\n                    },\n                    body:JSON.stringify({\n                        latitude: this.props.lat,\n                        longitude: this.props.long\n                    })\n                })\n                .then(resp => resp.json())\n                .then(data => this.setState({allEvents: data.Events.Event, nearestEvents: data.Events.Event.slice(0, 5), loaded: true}))\n                break;\n            case 1:\n                const options = {\n                    enableHighAccuracy: true,\n                    timeout: 10000,\n                    maximumAge: 0\n                }\n                const success = pos => {\n                    const crd = pos.coords;\n                    fetch(`http://localhost:3000/api/v1/nearest`,{\n                        method: \"POST\",\n                        headers:{\n                            \"accepts\": \"application/json\",\n                            \"content-type\": \"application/json\"\n                        },\n                        body:JSON.stringify({\n                            latitude: crd.latitude,\n                            longitude: crd.longitude\n                        })\n                    })\n                    .then(resp => resp.json())\n                    .then(data => this.setState({allEvents: data.Events.Event, nearestEvents: data.Events.Event !== undefined ? data.Events.Event.slice(0, 5) : [], loaded: true}))\n                }\n                    \n                const error = err => {\n                    console.warn(`ERROR(${err.code}): ${err.message}`);\n                }\n                \n                navigator.geolocation.getCurrentPosition(success, error, options);\n                break;\n            case 2:\n                fetch(`http://localhost:3000/api/v1/free`)\n                .then(resp => resp.json())\n                .then(data => this.setState({allEvents: data.Events.Event, nearestEvents: data.Events.Event !== undefined ? data.Events.Event.slice(0, 5) : [], loaded: true}))\n                break;\n            case 3:\n                fetch(`http://localhost:3000/api/v1/nearest`,{\n                    method: \"POST\",\n                    headers:{\n                        \"accepts\": \"application/json\",\n                        \"content-type\": \"application/json\"\n                    },\n                    body:JSON.stringify({\n                        latitude: this.props.lat,\n                        longitude: this.props.long\n                    })\n                })\n                .then(resp => resp.json())\n                .then(data => this.setState({nearestEvents: data.Events.Event.slice(0, 5), loaded: true}))\n                break;\n            default:\n                break;\n        }\n    } \n\n    componentDidUpdate(){\n        if(this.props.id === 0){\n            fetch(`http://localhost:3000/api/v1/nearest`,{\n                method: \"POST\",\n                headers:{\n                    \"accepts\": \"application/json\",\n                    \"content-type\": \"application/json\"\n                },\n                body:JSON.stringify({\n                    latitude: this.props.lat,\n                    longitude: this.props.long\n                })\n            })\n            .then(resp => resp.json())\n            .then(data => this.setState({allEvents: data.Events.Event, nearestEvents: data.Events.Event.slice(0, 5), loaded: true}))\n        }\n    }\n\n    render(){\n        return (\n            <div>   \n                {this.state.loaded ?\n                <div className=\"cards\">\n                    {this.state.nearestEvents !== undefined ? this.state.nearestEvents.map(event => <Card key={event.Name} event={event} showEventInfo={this.props.showEventInfo} />) : null}\n                    {\n                        this.state.nearestEvents.length > 0 ?\n                            this.state.nearestEvents.length > 4 ?\n                                <a href=\"/login\">Show me more!</a>\n                            :\n                                null\n                        :\n                            <p style={{paddingLeft: \"40px\"}}>No events to show, sorry!</p>\n                    }\n                </div>\n                :\n                <div>\n                    <h1>Loading...</h1>\n                </div>\n                    \n            \n                }\n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/Users/slavaP/Desktop/labs/=MOD4/practice/src/CardsContainer.js\";\nimport React from \"react\";\nimport Card from './Card';\nexport default class CardsContainer extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      events: [],\n      loaded: false,\n      current_lat: 40.75,\n      current_long: -74.0060\n    };\n  }\n\n  componentDidMount() {\n    const options = {\n      enableHighAccuracy: true,\n      timeout: 5000,\n      maximumAge: 0\n    };\n\n    const success = pos => {\n      const crd = pos.coords;\n      fetch(\"http://localhost:3000/api/v1/events\", {\n        method: \"POST\",\n        headers: {\n          accepts: \"application/json\",\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          latitude: this.props.lat,\n          longitude: this.props.long\n        })\n      }).then(resp => resp.json()).then(data => this.setState({\n        events: data.Events.Event,\n        loaded: true\n      }));\n      this.setState({\n        current_lat: crd.latitude,\n        current_long: crd.longitude\n      });\n    };\n\n    const error = err => {\n      console.warn(\"ERROR(\".concat(err.code, \"): \").concat(err.message));\n    };\n\n    navigator.geolocation.getCurrentPosition(success, error, options);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }, this.state.loaded ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, this.state.events.map(event => React.createElement(Card, {\n      event: event,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, \"More info\")) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, \"Loading\")));\n  }\n\n}","map":{"version":3,"sources":["/Users/slavaP/Desktop/labs/=MOD4/practice/src/CardsContainer.js"],"names":["React","Card","CardsContainer","Component","state","events","loaded","current_lat","current_long","componentDidMount","options","enableHighAccuracy","timeout","maximumAge","success","pos","crd","coords","fetch","method","headers","accepts","body","JSON","stringify","latitude","props","lat","longitude","long","then","resp","json","data","setState","Events","Event","error","err","console","warn","code","message","navigator","geolocation","getCurrentPosition","render","map","event"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AAEA,eAAe,MAAMC,cAAN,SAA6BF,KAAK,CAACG,SAAnC,CAA4C;AAAA;AAAA;AAAA,SACvDC,KADuD,GAC/C;AACJC,MAAAA,MAAM,EAAE,EADJ;AAEJC,MAAAA,MAAM,EAAE,KAFJ;AAGJC,MAAAA,WAAW,EAAE,KAHT;AAIJC,MAAAA,YAAY,EAAE,CAAC;AAJX,KAD+C;AAAA;;AAQvDC,EAAAA,iBAAiB,GAAE;AACf,UAAMC,OAAO,GAAG;AACZC,MAAAA,kBAAkB,EAAE,IADR;AAEZC,MAAAA,OAAO,EAAE,IAFG;AAGZC,MAAAA,UAAU,EAAE;AAHA,KAAhB;;AAKA,UAAMC,OAAO,GAAGC,GAAG,IAAI;AACnB,YAAMC,GAAG,GAAGD,GAAG,CAACE,MAAhB;AACAC,MAAAA,KAAK,wCAAuC;AAC5CC,QAAAA,MAAM,EAAE,MADoC;AAE5CC,QAAAA,OAAO,EAAC;AACJC,UAAAA,OAAO,EAAE,kBADL;AAEJ,0BAAgB;AAFZ,SAFoC;AAM5CC,QAAAA,IAAI,EAACC,IAAI,CAACC,SAAL,CAAe;AAChBC,UAAAA,QAAQ,EAAE,KAAKC,KAAL,CAAWC,GADL;AAEhBC,UAAAA,SAAS,EAAE,KAAKF,KAAL,CAAWG;AAFN,SAAf;AANuC,OAAvC,CAAL,CAWHC,IAXG,CAWEC,IAAI,IAAIA,IAAI,CAACC,IAAL,EAXV,EAYHF,IAZG,CAYEG,IAAI,IAAI,KAAKC,QAAL,CAAc;AAAC7B,QAAAA,MAAM,EAAE4B,IAAI,CAACE,MAAL,CAAYC,KAArB;AAA4B9B,QAAAA,MAAM,EAAE;AAApC,OAAd,CAZV;AAaA,WAAK4B,QAAL,CAAc;AAAC3B,QAAAA,WAAW,EAAES,GAAG,CAACS,QAAlB;AAA2BjB,QAAAA,YAAY,EAAEQ,GAAG,CAACY;AAA7C,OAAd;AACH,KAhBD;;AAkBA,UAAMS,KAAK,GAAGC,GAAG,IAAI;AACjBC,MAAAA,OAAO,CAACC,IAAR,iBAAsBF,GAAG,CAACG,IAA1B,gBAAoCH,GAAG,CAACI,OAAxC;AACH,KAFD;;AAIAC,IAAAA,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CAAyC/B,OAAzC,EAAkDuB,KAAlD,EAAyD3B,OAAzD;AACH;;AAEDoC,EAAAA,MAAM,GAAE;AACJ,WACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAK1C,KAAL,CAAWE,MAAX,GACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK,KAAKF,KAAL,CAAWC,MAAX,CAAkB0C,GAAlB,CAAsBC,KAAK,IAAI,oBAAC,IAAD;AAAM,MAAA,KAAK,EAAEA,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA/B,CADL,EAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFJ,CADC,GAMD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADJ,CAPJ,CADJ;AAgBH;;AAxDsD","sourcesContent":["import React from \"react\";\nimport Card from './Card'\n\nexport default class CardsContainer extends React.Component{\n    state = {\n        events: [],\n        loaded: false,\n        current_lat: 40.75,\n        current_long: -74.0060\n    }\n\n    componentDidMount(){\n        const options = {\n            enableHighAccuracy: true,\n            timeout: 5000,\n            maximumAge: 0\n        }\n        const success = pos => {\n            const crd = pos.coords;\n            fetch(`http://localhost:3000/api/v1/events`,{\n            method: \"POST\",\n            headers:{\n                accepts: \"application/json\",\n                \"content-type\": \"application/json\"\n            },\n            body:JSON.stringify({\n                latitude: this.props.lat,\n                longitude: this.props.long\n            })\n        })\n        .then(resp => resp.json())\n        .then(data => this.setState({events: data.Events.Event, loaded: true}))\n            this.setState({current_lat: crd.latitude,current_long: crd.longitude})\n        }\n        \n        const error = err => {\n            console.warn(`ERROR(${err.code}): ${err.message}`);\n        }\n        \n        navigator.geolocation.getCurrentPosition(success, error, options);\n    } \n\n    render(){\n        return (\n            <div>\n                {this.state.loaded ?\n                <div>\n                    {this.state.events.map(event => <Card event={event}/>)}\n                    <p>More info</p>\n                </div>\n                :\n                <div>\n                    <h1>Loading</h1>\n                </div>\n                    \n            \n                }\n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}
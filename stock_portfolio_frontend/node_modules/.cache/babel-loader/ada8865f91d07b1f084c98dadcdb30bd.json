{"ast":null,"code":"var _jsxFileName = \"/Users/slavaP/Desktop/labs/=MOD4/practice/src/CardsContainer.js\";\nimport React from \"react\";\nimport { Redirect } from 'react-router-dom';\nimport Card from './Card';\nexport default class CardsContainer extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      nearestEvents: [],\n      loaded: false\n    };\n  }\n\n  componentDidMount() {\n    switch (this.props.id) {\n      case 0:\n        fetch(\"http://localhost:3000/api/v1/nearest\", {\n          method: \"POST\",\n          headers: {\n            \"accepts\": \"application/json\",\n            \"content-type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            latitude: this.props.lat,\n            longitude: this.props.long\n          })\n        }).then(resp => resp.json()).then(data => {\n          this.setState({\n            nearestEvents: data.Events.Event.slice(0, 5),\n            loaded: true\n          });\n          this.props.setAllChoosenEvents(data);\n        });\n        break;\n\n      case 1:\n        const options = {\n          enableHighAccuracy: true,\n          timeout: 10000,\n          maximumAge: 0\n        };\n\n        const success = pos => {\n          const crd = pos.coords;\n          fetch(\"http://localhost:3000/api/v1/nearest\", {\n            method: \"POST\",\n            headers: {\n              \"accepts\": \"application/json\",\n              \"content-type\": \"application/json\"\n            },\n            body: JSON.stringify({\n              latitude: crd.latitude,\n              longitude: crd.longitude\n            })\n          }).then(resp => resp.json()).then(data => {\n            this.setState({\n              nearestEvents: data.Events.Event.slice(0, 5),\n              loaded: true\n            });\n            this.props.setAllNearesEvents(data);\n          });\n        };\n\n        const error = err => {\n          console.warn(\"ERROR(\".concat(err.code, \"): \").concat(err.message));\n        };\n\n        navigator.geolocation.getCurrentPosition(success, error, options);\n        break;\n\n      case 2:\n        fetch(\"http://localhost:3000/api/v1/free\").then(resp => resp.json()).then(data => {\n          this.setState({\n            nearestEvents: data.Events.Event.slice(0, 5),\n            loaded: true\n          });\n          this.props.setAllFreeEvents(data);\n        });\n        break;\n\n      case 3:\n        fetch(\"http://localhost:3000/api/v1/nearest\", {\n          method: \"POST\",\n          headers: {\n            \"accepts\": \"application/json\",\n            \"content-type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            latitude: this.props.lat,\n            longitude: this.props.long\n          })\n        }).then(resp => resp.json()).then(data => {\n          this.setState({\n            nearestEvents: data.Events.Event.slice(0, 5),\n            loaded: true\n          });\n          this.props.setAllRandEvents(data);\n        });\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.props.id === 0) {\n      fetch(\"http://localhost:3000/api/v1/nearest\", {\n        method: \"POST\",\n        headers: {\n          \"accepts\": \"application/json\",\n          \"content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          latitude: this.props.lat,\n          longitude: this.props.long\n        })\n      }).then(resp => resp.json()).then(data => {\n        this.setState({\n          nearestEvents: data.Events.Event.slice(0, 5),\n          loaded: true\n        });\n        this.props.setAllChoosenEvents(data);\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, this.state.loaded ? React.createElement(\"div\", {\n      className: \"cards\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, this.state.nearestEvents !== undefined ? this.state.nearestEvents.map(event => React.createElement(Card, {\n      key: event.Name,\n      event: event,\n      showEventInfo: this.props.showEventInfo,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    })) : null, this.state.nearestEvents.length > 0 ? this.state.nearestEvents.length > 4 ? React.createElement(\"a\", {\n      href: \"/events\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Show me more!\") : null : React.createElement(\"p\", {\n      style: {\n        paddingLeft: \"40px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"No events to show, sorry!\")) : React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Loading...\")));\n  }\n\n}","map":{"version":3,"sources":["/Users/slavaP/Desktop/labs/=MOD4/practice/src/CardsContainer.js"],"names":["React","Redirect","Card","CardsContainer","Component","state","nearestEvents","loaded","componentDidMount","props","id","fetch","method","headers","body","JSON","stringify","latitude","lat","longitude","long","then","resp","json","data","setState","Events","Event","slice","setAllChoosenEvents","options","enableHighAccuracy","timeout","maximumAge","success","pos","crd","coords","setAllNearesEvents","error","err","console","warn","code","message","navigator","geolocation","getCurrentPosition","setAllFreeEvents","setAllRandEvents","componentDidUpdate","render","undefined","map","event","Name","showEventInfo","length","paddingLeft"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Redirect } from 'react-router-dom'\nimport Card from './Card'\n\nexport default class CardsContainer extends React.Component{\n    state = {\n        nearestEvents: [],\n        loaded: false\n    }\n\n    componentDidMount(){\n        switch (this.props.id) {\n            case 0:\n                fetch(`http://localhost:3000/api/v1/nearest`,{\n                    method: \"POST\",\n                    headers:{\n                        \"accepts\": \"application/json\",\n                        \"content-type\": \"application/json\"\n                    },\n                    body:JSON.stringify({\n                        latitude: this.props.lat,\n                        longitude: this.props.long\n                    })\n                })\n                .then(resp => resp.json())\n                .then(data => {\n                    this.setState({nearestEvents: data.Events.Event.slice(0, 5), loaded: true})\n                    this.props.setAllChoosenEvents(data)\n                })\n                break;\n            case 1:\n                const options = {\n                    enableHighAccuracy: true,\n                    timeout: 10000,\n                    maximumAge: 0\n                }\n                const success = pos => {\n                    const crd = pos.coords;\n                    fetch(`http://localhost:3000/api/v1/nearest`,{\n                        method: \"POST\",\n                        headers:{\n                            \"accepts\": \"application/json\",\n                            \"content-type\": \"application/json\"\n                        },\n                        body:JSON.stringify({\n                            latitude: crd.latitude,\n                            longitude: crd.longitude\n                        })\n                    })\n                    .then(resp => resp.json())\n                    .then(data => {\n                        this.setState({nearestEvents: data.Events.Event.slice(0, 5), loaded: true})\n                        this.props.setAllNearesEvents(data)\n                    })\n                }\n                    \n                const error = err => {\n                    console.warn(`ERROR(${err.code}): ${err.message}`);\n                }\n                \n                navigator.geolocation.getCurrentPosition(success, error, options);\n                break;\n            case 2:\n                fetch(`http://localhost:3000/api/v1/free`)\n                .then(resp => resp.json())\n                .then(data => {\n                    this.setState({nearestEvents: data.Events.Event.slice(0, 5), loaded: true})\n                    this.props.setAllFreeEvents(data)\n                })\n                break;\n            case 3:\n                fetch(`http://localhost:3000/api/v1/nearest`,{\n                    method: \"POST\",\n                    headers:{\n                        \"accepts\": \"application/json\",\n                        \"content-type\": \"application/json\"\n                    },\n                    body:JSON.stringify({\n                        latitude: this.props.lat,\n                        longitude: this.props.long\n                    })\n                })\n                .then(resp => resp.json())\n                .then(data => {\n                    this.setState({nearestEvents: data.Events.Event.slice(0, 5), loaded: true})\n                    this.props.setAllRandEvents(data)\n                })\n                break;\n            default:\n                break;\n        }\n    } \n\n    componentDidUpdate(){\n        if(this.props.id === 0){\n            fetch(`http://localhost:3000/api/v1/nearest`,{\n                method: \"POST\",\n                headers:{\n                    \"accepts\": \"application/json\",\n                    \"content-type\": \"application/json\"\n                },\n                body:JSON.stringify({\n                    latitude: this.props.lat,\n                    longitude: this.props.long\n                })\n            })\n            .then(resp => resp.json())\n            .then(data => {\n                this.setState({nearestEvents: data.Events.Event.slice(0, 5), loaded: true})\n                this.props.setAllChoosenEvents(data)\n            })\n        }\n    }\n\n    render(){\n        return (\n            <div>   \n                {this.state.loaded ?\n                <div className=\"cards\">\n                    {this.state.nearestEvents !== undefined ? this.state.nearestEvents.map(event => <Card key={event.Name} event={event} showEventInfo={this.props.showEventInfo} />) : null}\n                    {\n                        this.state.nearestEvents.length > 0 ?\n                            this.state.nearestEvents.length > 4 ?\n                                <a href=\"/events\">Show me more!</a>\n                            :\n                                null\n                        :\n                            <p style={{paddingLeft: \"40px\"}}>No events to show, sorry!</p>\n                    }\n                </div>\n                :\n                <div>\n                    <h1>Loading...</h1>\n                </div>\n                    \n            \n                }\n            </div>\n        );\n    }\n}"]},"metadata":{},"sourceType":"module"}